<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Asynchronous distributed rate limiting for FastAPI/Starlette applications."><meta name=author content=tioluwa><link href=https://ti-oluwa.github.io/traffik/advanced/headers/ rel=canonical><link href=../ rel=prev><link href=../rules/ rel=next><link rel=icon href=../../assets/logo.svg><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.7.1"><title>Response Headers - Traffik</title><link rel=stylesheet href=../../assets/stylesheets/main.484c7ddc.min.css><link rel=stylesheet href=../../assets/stylesheets/palette.ab4e12ef.min.css><style>:root{--md-admonition-icon--note:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M1%207.775V2.75C1%201.784%201.784%201%202.75%201h5.025c.464%200%20.91.184%201.238.513l6.25%206.25a1.75%201.75%200%200%201%200%202.474l-5.026%205.026a1.75%201.75%200%200%201-2.474%200l-6.25-6.25A1.75%201.75%200%200%201%201%207.775m1.5%200c0%20.066.026.13.073.177l6.25%206.25a.25.25%200%200%200%20.354%200l5.025-5.025a.25.25%200%200%200%200-.354l-6.25-6.25a.25.25%200%200%200-.177-.073H2.75a.25.25%200%200%200-.25.25ZM6%205a1%201%200%201%201%200%202%201%201%200%200%201%200-2%22/%3E%3C/svg%3E');--md-admonition-icon--tip:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M3.499.75a.75.75%200%200%201%201.5%200v.996C5.9%202.903%206.793%203.65%207.662%204.376l.24.202c-.036-.694.055-1.422.426-2.163C9.1.873%2010.794-.045%2012.622.26%2014.408.558%2016%201.94%2016%204.25c0%201.278-.954%202.575-2.44%202.734l.146.508.065.22c.203.701.412%201.455.476%202.226.142%201.707-.4%203.03-1.487%203.898C11.714%2014.671%2010.27%2015%208.75%2015h-6a.75.75%200%200%201%200-1.5h1.376a4.5%204.5%200%200%201-.563-1.191%203.84%203.84%200%200%201-.05-2.063%204.65%204.65%200%200%201-2.025-.293.75.75%200%200%201%20.525-1.406c1.357.507%202.376-.006%202.698-.318l.009-.01a.747.747%200%200%201%201.06%200%20.75.75%200%200%201-.012%201.074c-.912.92-.992%201.835-.768%202.586.221.74.745%201.337%201.196%201.621H8.75c1.343%200%202.398-.296%203.074-.836.635-.507%201.036-1.31.928-2.602-.05-.603-.216-1.224-.422-1.93l-.064-.221c-.12-.407-.246-.84-.353-1.29a2.4%202.4%200%200%201-.507-.441%203.1%203.1%200%200%201-.633-1.248.75.75%200%200%201%201.455-.364c.046.185.144.436.31.627.146.168.353.305.712.305.738%200%201.25-.615%201.25-1.25%200-1.47-.95-2.315-2.123-2.51-1.172-.196-2.227.387-2.706%201.345-.46.92-.27%201.774.019%203.062l.042.19.01.05c.348.443.666.949.94%201.553a.75.75%200%201%201-1.365.62c-.553-1.217-1.32-1.94-2.3-2.768L6.7%205.527c-.814-.68-1.75-1.462-2.692-2.619a3.7%203.7%200%200%200-1.023.88c-.406.495-.663%201.036-.722%201.508.116.122.306.21.591.239.388.038.797-.06%201.032-.19a.75.75%200%200%201%20.728%201.31c-.515.287-1.23.439-1.906.373-.682-.067-1.473-.38-1.879-1.193L.75%205.677V5.5c0-.984.48-1.94%201.077-2.664.46-.559%201.05-1.055%201.673-1.353z%22/%3E%3C/svg%3E');--md-admonition-icon--warning:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M6.457%201.047c.659-1.234%202.427-1.234%203.086%200l6.082%2011.378A1.75%201.75%200%200%201%2014.082%2015H1.918a1.75%201.75%200%200%201-1.543-2.575Zm1.763.707a.25.25%200%200%200-.44%200L1.698%2013.132a.25.25%200%200%200%20.22.368h12.164a.25.25%200%200%200%20.22-.368Zm.53%203.996v2.5a.75.75%200%200%201-1.5%200v-2.5a.75.75%200%200%201%201.5%200M9%2011a1%201%200%201%201-2%200%201%201%200%200%201%202%200%22/%3E%3C/svg%3E');--md-admonition-icon--danger:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M9.504.43a1.516%201.516%200%200%201%202.437%201.713L10.415%205.5h2.123c1.57%200%202.346%201.909%201.22%203.004l-7.34%207.142a1.25%201.25%200%200%201-.871.354h-.302a1.25%201.25%200%200%201-1.157-1.723L5.633%2010.5H3.462c-1.57%200-2.346-1.909-1.22-3.004zm1.047%201.074L3.286%208.571A.25.25%200%200%200%203.462%209H6.75a.75.75%200%200%201%20.694%201.034l-1.713%204.188%206.982-6.793A.25.25%200%200%200%2012.538%207H9.25a.75.75%200%200%201-.683-1.06l2.008-4.418.003-.006-.004-.009-.006-.006-.008-.001q-.005%200-.009.004%22/%3E%3C/svg%3E');--md-admonition-icon--info:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M0%208a8%208%200%201%201%2016%200A8%208%200%200%201%200%208m8-6.5a6.5%206.5%200%201%200%200%2013%206.5%206.5%200%200%200%200-13M6.5%207.75A.75.75%200%200%201%207.25%207h1a.75.75%200%200%201%20.75.75v2.75h.25a.75.75%200%200%201%200%201.5h-2a.75.75%200%200%201%200-1.5h.25v-2h-.25a.75.75%200%200%201-.75-.75M8%206a1%201%200%201%201%200-2%201%201%200%200%201%200%202%22/%3E%3C/svg%3E');--md-admonition-icon--success:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M13.78%204.22a.75.75%200%200%201%200%201.06l-7.25%207.25a.75.75%200%200%201-1.06%200L2.22%209.28a.75.75%200%200%201%20.018-1.042.75.75%200%200%201%201.042-.018L6%2010.94l6.72-6.72a.75.75%200%200%201%201.06%200%22/%3E%3C/svg%3E');--md-admonition-icon--example:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M5%205.782V2.5h-.25a.75.75%200%200%201%200-1.5h6.5a.75.75%200%200%201%200%201.5H11v3.282l3.666%205.76C15.619%2013.04%2014.543%2015%2012.767%2015H3.233c-1.776%200-2.852-1.96-1.899-3.458Zm-2.4%206.565a.75.75%200%200%200%20.633%201.153h9.534a.75.75%200%200%200%20.633-1.153L12.225%2010.5h-8.45ZM9.5%202.5h-3V6c0%20.143-.04.283-.117.403L4.73%209h6.54L9.617%206.403A.75.75%200%200%201%209.5%206Z%22/%3E%3C/svg%3E');}</style><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=../../assets/css/custom.css><script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme=slate data-md-color-primary=deep-orange data-md-color-accent=amber> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#response-headers class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <div data-md-color-scheme=default data-md-component=outdated hidden> </div> <header class="md-header md-header--shadow md-header--lifted" data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../.. title=Traffik class="md-header__button md-logo" aria-label=Traffik data-md-component=logo> <img src=../../assets/logo.svg alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> Traffik </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Response Headers </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme=slate data-md-color-primary=deep-orange data-md-color-accent=amber aria-label="Switch to light mode" type=radio name=__palette id=__palette_0> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5s-1.65.15-2.39.42zM3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29zm.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14zM20.65 7l-1.77 3.79a7.02 7.02 0 0 0-2.38-4.15zm-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29zM12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44z"/></svg> </label> <input class=md-option data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme=default data-md-color-primary=deep-orange data-md-color-accent=amber aria-label="Switch to dark mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_0 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3zm3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31"/></svg> </label> </form> <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </label> <nav class=md-search__options aria-label=Search> <a href=javascript:void(0) class="md-search__icon md-icon" title=Share aria-label=Share data-clipboard data-clipboard-text data-md-component=search-share tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg> </a> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/ti-oluwa/traffik title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </div> <div class=md-source__repository> ti-oluwa/traffik </div> </a> </div> </nav> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../.. class=md-tabs__link> Home </a> </li> <li class=md-tabs__item> <a href=../../installation/ class=md-tabs__link> Getting Started </a> </li> <li class=md-tabs__item> <a href=../../core-concepts/ class=md-tabs__link> Core Concepts </a> </li> <li class=md-tabs__item> <a href=../../integration/ class=md-tabs__link> Integration </a> </li> <li class="md-tabs__item md-tabs__item--active"> <a href=../ class=md-tabs__link> Advanced </a> </li> <li class=md-tabs__item> <a href=../../configuration/ class=md-tabs__link> Configuration </a> </li> <li class=md-tabs__item> <a href=../../error-handling/ class=md-tabs__link> Error Handling </a> </li> <li class=md-tabs__item> <a href=../../extending/strategies/ class=md-tabs__link> Extending Traffik </a> </li> <li class=md-tabs__item> <a href=../../testing/ class=md-tabs__link> Testing </a> </li> <li class=md-tabs__item> <a href=../../benchmarks/ class=md-tabs__link> Benchmarks </a> </li> <li class=md-tabs__item> <a href=../../performance/ class=md-tabs__link> Performance </a> </li> <li class=md-tabs__item> <a href=../../api-reference/ class=md-tabs__link> API Reference </a> </li> </ul> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../.. title=Traffik class="md-nav__button md-logo" aria-label=Traffik data-md-component=logo> <img src=../../assets/logo.svg alt=logo> </a> Traffik </label> <div class=md-nav__source> <a href=https://github.com/ti-oluwa/traffik title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </div> <div class=md-source__repository> ti-oluwa/traffik </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../.. class=md-nav__link> <span class=md-ellipsis> Home </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_2> <label class=md-nav__link for=__nav_2 id=__nav_2_label tabindex=0> <span class=md-ellipsis> Getting Started </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> Getting Started </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../installation/ class=md-nav__link> <span class=md-ellipsis> Installation </span> </a> </li> <li class=md-nav__item> <a href=../../quickstart/ class=md-nav__link> <span class=md-ellipsis> Quick Start </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_3> <label class=md-nav__link for=__nav_3 id=__nav_3_label tabindex=0> <span class=md-ellipsis> Core Concepts </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_3_label aria-expanded=false> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Core Concepts </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../core-concepts/ class=md-nav__link> <span class=md-ellipsis> Overview </span> </a> </li> <li class=md-nav__item> <a href=../../core-concepts/rates/ class=md-nav__link> <span class=md-ellipsis> Rate Format </span> </a> </li> <li class=md-nav__item> <a href=../../core-concepts/backends/ class=md-nav__link> <span class=md-ellipsis> Backends </span> </a> </li> <li class=md-nav__item> <a href=../../core-concepts/strategies/ class=md-nav__link> <span class=md-ellipsis> Strategies </span> </a> </li> <li class=md-nav__item> <a href=../../core-concepts/identifiers/ class=md-nav__link> <span class=md-ellipsis> Identifiers </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_4> <label class=md-nav__link for=__nav_4 id=__nav_4_label tabindex=0> <span class=md-ellipsis> Integration </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_4_label aria-expanded=false> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> Integration </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../integration/ class=md-nav__link> <span class=md-ellipsis> Overview </span> </a> </li> <li class=md-nav__item> <a href=../../integration/dependencies/ class=md-nav__link> <span class=md-ellipsis> Dependencies </span> </a> </li> <li class=md-nav__item> <a href=../../integration/decorators/ class=md-nav__link> <span class=md-ellipsis> Decorators </span> </a> </li> <li class=md-nav__item> <a href=../../integration/middleware/ class=md-nav__link> <span class=md-ellipsis> Middleware </span> </a> </li> <li class=md-nav__item> <a href=../../integration/direct-usage/ class=md-nav__link> <span class=md-ellipsis> Direct Usage </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5 checked> <label class=md-nav__link for=__nav_5 id=__nav_5_label tabindex> <span class=md-ellipsis> Advanced </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_5_label aria-expanded=true> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> Advanced </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../ class=md-nav__link> <span class=md-ellipsis> Overview </span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> Response Headers </span> <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> Response Headers </span> </a> <nav class="md-nav md-nav--secondary" aria-label="On this page"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> On this page </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#why-headers-matter class=md-nav__link> <span class=md-ellipsis> Why Headers Matter </span> </a> </li> <li class=md-nav__item> <a href=#built-in-header-presets class=md-nav__link> <span class=md-ellipsis> Built-in Header Presets </span> </a> </li> <li class=md-nav__item> <a href=#attaching-headers-to-a-throttle class=md-nav__link> <span class=md-ellipsis> Attaching Headers to a Throttle </span> </a> </li> <li class=md-nav__item> <a href=#the-header-class class=md-nav__link> <span class=md-ellipsis> The Header Class </span> </a> <nav class=md-nav aria-label="The Header Class"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#built-in-header-builders class=md-nav__link> <span class=md-ellipsis> Built-in Header Builders </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#header-conditions-whenalways-vs-whenthrottled class=md-nav__link> <span class=md-ellipsis> Header Conditions: when="always" vs when="throttled" </span> </a> <nav class=md-nav aria-label='Header Conditions: when="always" vs when="throttled"'> <ul class=md-nav__list> <li class=md-nav__item> <a href=#chaining-with-when class=md-nav__link> <span class=md-ellipsis> Chaining with .when() </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#custom-header-values class=md-nav__link> <span class=md-ellipsis> Custom Header Values </span> </a> <nav class=md-nav aria-label="Custom Header Values"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#static-values class=md-nav__link> <span class=md-ellipsis> Static values </span> </a> </li> <li class=md-nav__item> <a href=#dynamic-values-via-resolver-function class=md-nav__link> <span class=md-ellipsis> Dynamic values via resolver function </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#building-a-headers-collection class=md-nav__link> <span class=md-ellipsis> Building a Headers Collection </span> </a> </li> <li class=md-nav__item> <a href=#merging-headers class=md-nav__link> <span class=md-ellipsis> Merging Headers </span> </a> </li> <li class=md-nav__item> <a href=#disabling-a-header-per-request class=md-nav__link> <span class=md-ellipsis> Disabling a Header Per-Request </span> </a> </li> <li class=md-nav__item> <a href=#real-world-example-githubstripe-style-headers class=md-nav__link> <span class=md-ellipsis> Real-World Example: GitHub/Stripe-Style Headers </span> </a> </li> <li class=md-nav__item> <a href=#summary class=md-nav__link> <span class=md-ellipsis> Summary </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../rules/ class=md-nav__link> <span class=md-ellipsis> Throttle Rules & Wildcards </span> </a> </li> <li class=md-nav__item> <a href=../registry/ class=md-nav__link> <span class=md-ellipsis> Throttle Registry </span> </a> </li> <li class=md-nav__item> <a href=../request-costs/ class=md-nav__link> <span class=md-ellipsis> Request Costs </span> </a> </li> <li class=md-nav__item> <a href=../multiple-limits/ class=md-nav__link> <span class=md-ellipsis> Multiple Limits </span> </a> </li> <li class=md-nav__item> <a href=../exemptions/ class=md-nav__link> <span class=md-ellipsis> Exemptions </span> </a> </li> <li class=md-nav__item> <a href=../context-backends/ class=md-nav__link> <span class=md-ellipsis> Context-Aware Backends </span> </a> </li> <li class=md-nav__item> <a href=../statistics/ class=md-nav__link> <span class=md-ellipsis> Strategy Statistics </span> </a> </li> <li class=md-nav__item> <a href=../throttled-handlers/ class=md-nav__link> <span class=md-ellipsis> Custom Throttled Handlers </span> </a> </li> <li class=md-nav__item> <a href=../quota-context/ class=md-nav__link> <span class=md-ellipsis> Quota Context </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../configuration/ class=md-nav__link> <span class=md-ellipsis> Configuration </span> </a> </li> <li class=md-nav__item> <a href=../../error-handling/ class=md-nav__link> <span class=md-ellipsis> Error Handling </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_8> <label class=md-nav__link for=__nav_8 id=__nav_8_label tabindex=0> <span class=md-ellipsis> Extending Traffik </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_8_label aria-expanded=false> <label class=md-nav__title for=__nav_8> <span class="md-nav__icon md-icon"></span> Extending Traffik </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../extending/strategies/ class=md-nav__link> <span class=md-ellipsis> Custom Strategies </span> </a> </li> <li class=md-nav__item> <a href=../../extending/backends/ class=md-nav__link> <span class=md-ellipsis> Custom Backends </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../testing/ class=md-nav__link> <span class=md-ellipsis> Testing </span> </a> </li> <li class=md-nav__item> <a href=../../benchmarks/ class=md-nav__link> <span class=md-ellipsis> Benchmarks </span> </a> </li> <li class=md-nav__item> <a href=../../performance/ class=md-nav__link> <span class=md-ellipsis> Performance </span> </a> </li> <li class=md-nav__item> <a href=../../api-reference/ class=md-nav__link> <span class=md-ellipsis> API Reference </span> </a> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="On this page"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> On this page </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#why-headers-matter class=md-nav__link> <span class=md-ellipsis> Why Headers Matter </span> </a> </li> <li class=md-nav__item> <a href=#built-in-header-presets class=md-nav__link> <span class=md-ellipsis> Built-in Header Presets </span> </a> </li> <li class=md-nav__item> <a href=#attaching-headers-to-a-throttle class=md-nav__link> <span class=md-ellipsis> Attaching Headers to a Throttle </span> </a> </li> <li class=md-nav__item> <a href=#the-header-class class=md-nav__link> <span class=md-ellipsis> The Header Class </span> </a> <nav class=md-nav aria-label="The Header Class"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#built-in-header-builders class=md-nav__link> <span class=md-ellipsis> Built-in Header Builders </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#header-conditions-whenalways-vs-whenthrottled class=md-nav__link> <span class=md-ellipsis> Header Conditions: when="always" vs when="throttled" </span> </a> <nav class=md-nav aria-label='Header Conditions: when="always" vs when="throttled"'> <ul class=md-nav__list> <li class=md-nav__item> <a href=#chaining-with-when class=md-nav__link> <span class=md-ellipsis> Chaining with .when() </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#custom-header-values class=md-nav__link> <span class=md-ellipsis> Custom Header Values </span> </a> <nav class=md-nav aria-label="Custom Header Values"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#static-values class=md-nav__link> <span class=md-ellipsis> Static values </span> </a> </li> <li class=md-nav__item> <a href=#dynamic-values-via-resolver-function class=md-nav__link> <span class=md-ellipsis> Dynamic values via resolver function </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#building-a-headers-collection class=md-nav__link> <span class=md-ellipsis> Building a Headers Collection </span> </a> </li> <li class=md-nav__item> <a href=#merging-headers class=md-nav__link> <span class=md-ellipsis> Merging Headers </span> </a> </li> <li class=md-nav__item> <a href=#disabling-a-header-per-request class=md-nav__link> <span class=md-ellipsis> Disabling a Header Per-Request </span> </a> </li> <li class=md-nav__item> <a href=#real-world-example-githubstripe-style-headers class=md-nav__link> <span class=md-ellipsis> Real-World Example: GitHub/Stripe-Style Headers </span> </a> </li> <li class=md-nav__item> <a href=#summary class=md-nav__link> <span class=md-ellipsis> Summary </span> </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <nav class=md-path aria-label=Navigation> <ol class=md-path__list> <li class=md-path__item> <a href=../.. class=md-path__link> <span class=md-ellipsis> Home </span> </a> </li> <li class=md-path__item> <a href=../ class=md-path__link> <span class=md-ellipsis> Advanced </span> </a> </li> </ol> </nav> <article class="md-content__inner md-typeset"> <h1 id=response-headers>Response <abbr title="A collection of rate limit response headers, resolved per request. Import: from traffik.headers import Headers">Headers</abbr><a class=headerlink href=#response-headers title="Permanent link">&para;</a></h1> <p><abbr title='A rate specification parsed from a string like "100/min". Holds the request limit and window duration. Import: from traffik.rates import Rate'>Rate</abbr> limiting is half the battle. The other half is telling clients <em>how</em> they're doing before they slam into a wall.</p> <p>Without response headers, your clients are flying blind - they have no idea how many requests they have left, when their window resets, or why they suddenly got a <code>429</code>. With the right headers, a well-behaved client can slow itself down gracefully, show users a meaningful "try again in X seconds" message, and stop hammering your API unnecessarily.</p> <p>This page covers the <code>Header</code> and <code>Headers</code> system that Traffik uses to <strong>resolve</strong> rate limit header values. Traffik does not automatically inject headers into responses, it computes the values and returns them. It's up to you to attach them to your response however you see fit (e.g., via middleware, a custom dependency, or a Starlette response). The <code>headers=</code> parameter on a throttle tells Traffik <em>which</em> headers to resolve, not which ones to auto-inject.</p> <hr> <h2 id=why-headers-matter>Why <abbr title="A collection of rate limit response headers, resolved per request. Import: from traffik.headers import Headers">Headers</abbr> Matter<a class=headerlink href=#why-headers-matter title="Permanent link">&para;</a></h2> <p>Standard rate limit headers have become a de facto convention - GitHub, Stripe, Cloudflare, and most large APIs all use some variation of these three:</p> <table> <thead> <tr> <th><abbr title="A single rate limit response header with a name, value resolver, and inclusion condition. Import: from traffik.headers import Header">Header</abbr></th> <th>Meaning</th> </tr> </thead> <tbody> <tr> <td><code>X-RateLimit-Limit</code></td> <td>Maximum requests allowed in the current window</td> </tr> <tr> <td><code>X-RateLimit-Remaining</code></td> <td>Requests left in the current window</td> </tr> <tr> <td><code>Retry-After</code></td> <td>Seconds to wait before trying again (RFC 6585)</td> </tr> </tbody> </table> <p>A client that reads these headers can back off gracefully, show users a countdown timer, or queue requests intelligently. A client that doesn't get them just crashes and retries until you block it.</p> <p>Traffik lets you attach these headers to every response, or only to throttled responses, whichever fits your API contract.</p> <hr> <h2 id=built-in-header-presets>Built-in <abbr title="A single rate limit response header with a name, value resolver, and inclusion condition. Import: from traffik.headers import Header">Header</abbr> Presets<a class=headerlink href=#built-in-header-presets title="Permanent link">&para;</a></h2> <p>For most use cases, you don't need to build your own headers from scratch. Traffik ships two ready-made presets, available from both <code>traffik</code> and <code>traffik.headers</code>:</p> <div class="language-python highlight"><pre><span></span><code><span id=__span-0-1><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=kn>from</span><span class=w> </span><span class=nn>traffik.headers</span><span class=w> </span><span class=kn>import</span> <span class=n>DEFAULT_HEADERS_ALWAYS</span><span class=p>,</span> <span class=n>DEFAULT_HEADERS_THROTTLED</span>
</span><span id=__span-0-2><a id=__codelineno-0-2 name=__codelineno-0-2 href=#__codelineno-0-2></a><span class=c1># or equivalently:</span>
</span><span id=__span-0-3><a id=__codelineno-0-3 name=__codelineno-0-3 href=#__codelineno-0-3></a><span class=c1># from traffik import DEFAULT_HEADERS_ALWAYS, DEFAULT_HEADERS_THROTTLED</span>
</span></code></pre></div> <p><strong><code>DEFAULT_HEADERS_ALWAYS</code></strong> - Sends <code>X-RateLimit-Limit</code>, <code>X-RateLimit-Remaining</code>, and <code>Retry-After</code> on <em>every</em> response. Clients can always see their current status.</p> <p><strong><code>DEFAULT_HEADERS_THROTTLED</code></strong> - Sends the same three headers <em>only</em> when a client is throttled (i.e., receives a <code>429</code>). Quieter by default; headers appear only when they matter most.</p> <div class="admonition tip"> <p class=admonition-title>Which should I use?</p> <p><code>DEFAULT_HEADERS_ALWAYS</code> is friendlier for client developers, they can poll their remaining quota without making a special endpoint for it. <code>DEFAULT_HEADERS_THROTTLED</code> keeps response size smaller on normal requests and is common in APIs where clients are expected to track their own usage. GitHub uses "always"; many simpler APIs use "throttled".</p> </div> <hr> <h2 id=attaching-headers-to-a-throttle>Attaching <abbr title="A collection of rate limit response headers, resolved per request. Import: from traffik.headers import Headers">Headers</abbr> to a Throttle<a class=headerlink href=#attaching-headers-to-a-throttle title="Permanent link">&para;</a></h2> <p>Pass a <code>headers</code> argument when constructing any throttle:</p> <div class="language-python highlight"><pre><span></span><code><span id=__span-1-1><a id=__codelineno-1-1 name=__codelineno-1-1 href=#__codelineno-1-1></a><span class=kn>from</span><span class=w> </span><span class=nn>traffik</span><span class=w> </span><span class=kn>import</span> <span class=n>HTTPThrottle</span>
</span><span id=__span-1-2><a id=__codelineno-1-2 name=__codelineno-1-2 href=#__codelineno-1-2></a><span class=kn>from</span><span class=w> </span><span class=nn>traffik.headers</span><span class=w> </span><span class=kn>import</span> <span class=n>DEFAULT_HEADERS_ALWAYS</span>
</span><span id=__span-1-3><a id=__codelineno-1-3 name=__codelineno-1-3 href=#__codelineno-1-3></a>
</span><span id=__span-1-4><a id=__codelineno-1-4 name=__codelineno-1-4 href=#__codelineno-1-4></a><span class=n>throttle</span> <span class=o>=</span> <span class=n>HTTPThrottle</span><span class=p>(</span>
</span><span id=__span-1-5><a id=__codelineno-1-5 name=__codelineno-1-5 href=#__codelineno-1-5></a>    <span class=s2>&quot;api:items&quot;</span><span class=p>,</span>
</span><span id=__span-1-6><a id=__codelineno-1-6 name=__codelineno-1-6 href=#__codelineno-1-6></a>    <span class=n>rate</span><span class=o>=</span><span class=s2>&quot;100/min&quot;</span><span class=p>,</span>
</span><span id=__span-1-7><a id=__codelineno-1-7 name=__codelineno-1-7 href=#__codelineno-1-7></a>    <span class=n>headers</span><span class=o>=</span><span class=n>DEFAULT_HEADERS_ALWAYS</span><span class=p>,</span>
</span><span id=__span-1-8><a id=__codelineno-1-8 name=__codelineno-1-8 href=#__codelineno-1-8></a><span class=p>)</span>
</span></code></pre></div> <p>The <code>headers=</code> parameter tells Traffik which headers to <em>resolve</em> on a hit. On every hit (throttled or not, depending on the preset), the header values are computed from the current strategy statistics and returned by <code>throttle.get_headers()</code>. You are responsible for attaching them to your response, for example by calling <code>response.headers.update(resolved)</code> in a custom handler or middleware.</p> <hr> <h2 id=the-header-class>The <code>Header</code> Class<a class=headerlink href=#the-header-class title="Permanent link">&para;</a></h2> <p>Internally, each header in a <code>Headers</code> collection is a <code>Header</code> instance, a small, immutable object that knows <em>when</em> to include itself and <em>how</em> to compute its value.</p> <div class="language-python highlight"><pre><span></span><code><span id=__span-2-1><a id=__codelineno-2-1 name=__codelineno-2-1 href=#__codelineno-2-1></a><span class=kn>from</span><span class=w> </span><span class=nn>traffik.headers</span><span class=w> </span><span class=kn>import</span> <span class=n>Header</span>
</span></code></pre></div> <h3 id=built-in-header-builders>Built-in <abbr title="A single rate limit response header with a name, value resolver, and inclusion condition. Import: from traffik.headers import Header">Header</abbr> Builders<a class=headerlink href=#built-in-header-builders title="Permanent link">&para;</a></h3> <p><code>Header</code> exposes four class methods for the standard rate limit headers:</p> <div class="language-python highlight"><pre><span></span><code><span id=__span-3-1><a id=__codelineno-3-1 name=__codelineno-3-1 href=#__codelineno-3-1></a><span class=n>Header</span><span class=o>.</span><span class=n>LIMIT</span><span class=p>(</span><span class=n>when</span><span class=o>=...</span><span class=p>)</span>          <span class=c1># X-RateLimit-Limit: max hits per window</span>
</span><span id=__span-3-2><a id=__codelineno-3-2 name=__codelineno-3-2 href=#__codelineno-3-2></a><span class=n>Header</span><span class=o>.</span><span class=n>REMAINING</span><span class=p>(</span><span class=n>when</span><span class=o>=...</span><span class=p>)</span>      <span class=c1># X-RateLimit-Remaining: hits left this window</span>
</span><span id=__span-3-3><a id=__codelineno-3-3 name=__codelineno-3-3 href=#__codelineno-3-3></a><span class=n>Header</span><span class=o>.</span><span class=n>RESET_SECONDS</span><span class=p>(</span><span class=n>when</span><span class=o>=...</span><span class=p>)</span>  <span class=c1># Retry-After: seconds until window resets</span>
</span><span id=__span-3-4><a id=__codelineno-3-4 name=__codelineno-3-4 href=#__codelineno-3-4></a><span class=n>Header</span><span class=o>.</span><span class=n>RESET_MILLISECONDS</span><span class=p>(</span><span class=n>when</span><span class=o>=...</span><span class=p>)</span>  <span class=c1># X-RateLimit-Reset-Ms: milliseconds until reset</span>
</span></code></pre></div> <p>Each returns a <code>Header</code> instance that resolves its value at request time from the live strategy statistics. The <code>when</code> parameter is <strong>required</strong>, it controls when the header appears in the response.</p> <div class="admonition note"> <p class=admonition-title>Why is <code>when</code> required on class methods?</p> <p>Traffik makes the inclusion condition explicit rather than defaulting silently. Forgetting a <code>when</code> value on a header builder would be a common footgun: should a <code>Retry-After</code> header appear on every <code>200</code> response? Probably not. Making it explicit keeps the contract clear.</p> </div> <hr> <h2 id=header-conditions-whenalways-vs-whenthrottled><abbr title="A single rate limit response header with a name, value resolver, and inclusion condition. Import: from traffik.headers import Header">Header</abbr> Conditions: <code>when="always"</code> vs <code>when="throttled"</code><a class=headerlink href=#header-conditions-whenalways-vs-whenthrottled title="Permanent link">&para;</a></h2> <p>The <code>when</code> parameter on every <code>Header</code> controls its inclusion logic:</p> <div class="language-python highlight"><pre><span></span><code><span id=__span-4-1><a id=__codelineno-4-1 name=__codelineno-4-1 href=#__codelineno-4-1></a><span class=c1># Include this header on every response, throttled or not</span>
</span><span id=__span-4-2><a id=__codelineno-4-2 name=__codelineno-4-2 href=#__codelineno-4-2></a><span class=n>Header</span><span class=o>.</span><span class=n>REMAINING</span><span class=p>(</span><span class=n>when</span><span class=o>=</span><span class=s2>&quot;always&quot;</span><span class=p>)</span>
</span><span id=__span-4-3><a id=__codelineno-4-3 name=__codelineno-4-3 href=#__codelineno-4-3></a>
</span><span id=__span-4-4><a id=__codelineno-4-4 name=__codelineno-4-4 href=#__codelineno-4-4></a><span class=c1># Include this header only when the client is throttled (hits_remaining &lt;= 0)</span>
</span><span id=__span-4-5><a id=__codelineno-4-5 name=__codelineno-4-5 href=#__codelineno-4-5></a><span class=n>Header</span><span class=o>.</span><span class=n>REMAINING</span><span class=p>(</span><span class=n>when</span><span class=o>=</span><span class=s2>&quot;throttled&quot;</span><span class=p>)</span>
</span></code></pre></div> <p>You can also pass a <strong>custom callable</strong> for more nuanced conditions:</p> <div class="language-python highlight"><pre><span></span><code><span id=__span-5-1><a id=__codelineno-5-1 name=__codelineno-5-1 href=#__codelineno-5-1></a><span class=k>def</span><span class=w> </span><span class=nf>warn_when_low</span><span class=p>(</span><span class=n>connection</span><span class=p>,</span> <span class=n>stat</span><span class=p>,</span> <span class=n>context</span><span class=p>):</span>
</span><span id=__span-5-2><a id=__codelineno-5-2 name=__codelineno-5-2 href=#__codelineno-5-2></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Include the header when the client is below 10% quota remaining.&quot;&quot;&quot;</span>
</span><span id=__span-5-3><a id=__codelineno-5-3 name=__codelineno-5-3 href=#__codelineno-5-3></a>    <span class=k>return</span> <span class=n>stat</span><span class=o>.</span><span class=n>hits_remaining</span> <span class=o>&lt;</span> <span class=p>(</span><span class=n>stat</span><span class=o>.</span><span class=n>rate</span><span class=o>.</span><span class=n>limit</span> <span class=o>*</span> <span class=mf>0.1</span><span class=p>)</span>
</span><span id=__span-5-4><a id=__codelineno-5-4 name=__codelineno-5-4 href=#__codelineno-5-4></a>
</span><span id=__span-5-5><a id=__codelineno-5-5 name=__codelineno-5-5 href=#__codelineno-5-5></a><span class=n>Header</span><span class=o>.</span><span class=n>REMAINING</span><span class=p>(</span><span class=n>when</span><span class=o>=</span><span class=n>warn_when_low</span><span class=p>)</span>
</span></code></pre></div> <p>The callable receives three arguments:</p> <ul> <li><code>connection</code> - the current <code>Request</code> or <code>WebSocket</code></li> <li><code>stat</code> - the <code>StrategyStat</code> object with <code>.hits_remaining</code>, <code>.rate</code>, <code>.wait_ms</code>, etc.</li> <li><code>context</code> - the throttle context dict, or <code>None</code></li> </ul> <p>It should return <code>True</code> to include the header, <code>False</code> to skip it.</p> <h3 id=chaining-with-when>Chaining with <code>.when()</code><a class=headerlink href=#chaining-with-when title="Permanent link">&para;</a></h3> <p>If you have an existing <code>Header</code> instance and want a copy with a different condition, use the <code>.when()</code> method or the convenience properties:</p> <div class="language-python highlight"><pre><span></span><code><span id=__span-6-1><a id=__codelineno-6-1 name=__codelineno-6-1 href=#__codelineno-6-1></a><span class=n>base</span> <span class=o>=</span> <span class=n>Header</span><span class=o>.</span><span class=n>REMAINING</span><span class=p>(</span><span class=n>when</span><span class=o>=</span><span class=s2>&quot;always&quot;</span><span class=p>)</span>
</span><span id=__span-6-2><a id=__codelineno-6-2 name=__codelineno-6-2 href=#__codelineno-6-2></a>
</span><span id=__span-6-3><a id=__codelineno-6-3 name=__codelineno-6-3 href=#__codelineno-6-3></a><span class=c1># These are all equivalent</span>
</span><span id=__span-6-4><a id=__codelineno-6-4 name=__codelineno-6-4 href=#__codelineno-6-4></a><span class=n>throttled_only</span> <span class=o>=</span> <span class=n>base</span><span class=o>.</span><span class=n>when</span><span class=p>(</span><span class=s2>&quot;throttled&quot;</span><span class=p>)</span>
</span><span id=__span-6-5><a id=__codelineno-6-5 name=__codelineno-6-5 href=#__codelineno-6-5></a><span class=n>throttled_only</span> <span class=o>=</span> <span class=n>base</span><span class=o>.</span><span class=n>throttled</span>
</span><span id=__span-6-6><a id=__codelineno-6-6 name=__codelineno-6-6 href=#__codelineno-6-6></a>
</span><span id=__span-6-7><a id=__codelineno-6-7 name=__codelineno-6-7 href=#__codelineno-6-7></a><span class=n>always_on</span> <span class=o>=</span> <span class=n>base</span><span class=o>.</span><span class=n>when</span><span class=p>(</span><span class=s2>&quot;always&quot;</span><span class=p>)</span>
</span><span id=__span-6-8><a id=__codelineno-6-8 name=__codelineno-6-8 href=#__codelineno-6-8></a><span class=n>always_on</span> <span class=o>=</span> <span class=n>base</span><span class=o>.</span><span class=n>always</span>
</span></code></pre></div> <hr> <h2 id=custom-header-values>Custom <abbr title="A single rate limit response header with a name, value resolver, and inclusion condition. Import: from traffik.headers import Header">Header</abbr> Values<a class=headerlink href=#custom-header-values title="Permanent link">&para;</a></h2> <h3 id=static-values>Static values<a class=headerlink href=#static-values title="Permanent link">&para;</a></h3> <p>For a header whose value never changes, just pass a string:</p> <div class="language-python highlight"><pre><span></span><code><span id=__span-7-1><a id=__codelineno-7-1 name=__codelineno-7-1 href=#__codelineno-7-1></a><span class=kn>from</span><span class=w> </span><span class=nn>traffik.headers</span><span class=w> </span><span class=kn>import</span> <span class=n>Header</span>
</span><span id=__span-7-2><a id=__codelineno-7-2 name=__codelineno-7-2 href=#__codelineno-7-2></a>
</span><span id=__span-7-3><a id=__codelineno-7-3 name=__codelineno-7-3 href=#__codelineno-7-3></a><span class=c1># A static policy string (useful for RFC 9440 RateLimit-Policy header)</span>
</span><span id=__span-7-4><a id=__codelineno-7-4 name=__codelineno-7-4 href=#__codelineno-7-4></a><span class=n>policy_header</span> <span class=o>=</span> <span class=n>Header</span><span class=p>(</span><span class=s2>&quot;100;w=60&quot;</span><span class=p>)</span>
</span></code></pre></div> <h3 id=dynamic-values-via-resolver-function>Dynamic values via resolver function<a class=headerlink href=#dynamic-values-via-resolver-function title="Permanent link">&para;</a></h3> <p>For a value computed at request time, pass a callable with signature <code>(connection, stat, context) -&gt; str</code>:</p> <div class="language-python highlight"><pre><span></span><code><span id=__span-8-1><a id=__codelineno-8-1 name=__codelineno-8-1 href=#__codelineno-8-1></a><span class=kn>from</span><span class=w> </span><span class=nn>traffik.headers</span><span class=w> </span><span class=kn>import</span> <span class=n>Header</span>
</span><span id=__span-8-2><a id=__codelineno-8-2 name=__codelineno-8-2 href=#__codelineno-8-2></a>
</span><span id=__span-8-3><a id=__codelineno-8-3 name=__codelineno-8-3 href=#__codelineno-8-3></a><span class=k>def</span><span class=w> </span><span class=nf>my_resolver</span><span class=p>(</span><span class=n>connection</span><span class=p>,</span> <span class=n>stat</span><span class=p>,</span> <span class=n>context</span><span class=p>):</span>
</span><span id=__span-8-4><a id=__codelineno-8-4 name=__codelineno-8-4 href=#__codelineno-8-4></a>    <span class=k>if</span> <span class=n>stat</span><span class=p>:</span>
</span><span id=__span-8-5><a id=__codelineno-8-5 name=__codelineno-8-5 href=#__codelineno-8-5></a>        <span class=k>return</span> <span class=nb>str</span><span class=p>(</span><span class=nb>int</span><span class=p>(</span><span class=n>stat</span><span class=o>.</span><span class=n>hits_remaining</span><span class=p>))</span>
</span><span id=__span-8-6><a id=__codelineno-8-6 name=__codelineno-8-6 href=#__codelineno-8-6></a>    <span class=k>return</span> <span class=s2>&quot;unknown&quot;</span>
</span><span id=__span-8-7><a id=__codelineno-8-7 name=__codelineno-8-7 href=#__codelineno-8-7></a>
</span><span id=__span-8-8><a id=__codelineno-8-8 name=__codelineno-8-8 href=#__codelineno-8-8></a><span class=n>custom_dynamic</span> <span class=o>=</span> <span class=n>Header</span><span class=p>(</span><span class=n>my_resolver</span><span class=p>,</span> <span class=n>when</span><span class=o>=</span><span class=s2>&quot;always&quot;</span><span class=p>)</span>
</span></code></pre></div> <p>The resolver is called on every request where the <code>when</code> condition passes. Keep it fast, it's on the hot path.</p> <hr> <h2 id=building-a-headers-collection>Building a <code>Headers</code> Collection<a class=headerlink href=#building-a-headers-collection title="Permanent link">&para;</a></h2> <p><code>Headers</code> is a mapping of header name strings to <code>Header</code> instances (or raw strings for static values). It's the recommended way to package headers for a throttle:</p> <div class="language-python highlight"><pre><span></span><code><span id=__span-9-1><a id=__codelineno-9-1 name=__codelineno-9-1 href=#__codelineno-9-1></a><span class=kn>from</span><span class=w> </span><span class=nn>traffik</span><span class=w> </span><span class=kn>import</span> <span class=n>HTTPThrottle</span>
</span><span id=__span-9-2><a id=__codelineno-9-2 name=__codelineno-9-2 href=#__codelineno-9-2></a><span class=kn>from</span><span class=w> </span><span class=nn>traffik.headers</span><span class=w> </span><span class=kn>import</span> <span class=n>Headers</span><span class=p>,</span> <span class=n>Header</span>
</span><span id=__span-9-3><a id=__codelineno-9-3 name=__codelineno-9-3 href=#__codelineno-9-3></a>
</span><span id=__span-9-4><a id=__codelineno-9-4 name=__codelineno-9-4 href=#__codelineno-9-4></a><span class=n>my_headers</span> <span class=o>=</span> <span class=n>Headers</span><span class=p>({</span>
</span><span id=__span-9-5><a id=__codelineno-9-5 name=__codelineno-9-5 href=#__codelineno-9-5></a>    <span class=s2>&quot;X-RateLimit-Limit&quot;</span><span class=p>:</span> <span class=n>Header</span><span class=o>.</span><span class=n>LIMIT</span><span class=p>(</span><span class=n>when</span><span class=o>=</span><span class=s2>&quot;always&quot;</span><span class=p>),</span>
</span><span id=__span-9-6><a id=__codelineno-9-6 name=__codelineno-9-6 href=#__codelineno-9-6></a>    <span class=s2>&quot;X-RateLimit-Remaining&quot;</span><span class=p>:</span> <span class=n>Header</span><span class=o>.</span><span class=n>REMAINING</span><span class=p>(</span><span class=n>when</span><span class=o>=</span><span class=s2>&quot;always&quot;</span><span class=p>),</span>
</span><span id=__span-9-7><a id=__codelineno-9-7 name=__codelineno-9-7 href=#__codelineno-9-7></a>    <span class=s2>&quot;Retry-After&quot;</span><span class=p>:</span> <span class=n>Header</span><span class=o>.</span><span class=n>RESET_SECONDS</span><span class=p>(</span><span class=n>when</span><span class=o>=</span><span class=s2>&quot;throttled&quot;</span><span class=p>),</span>
</span><span id=__span-9-8><a id=__codelineno-9-8 name=__codelineno-9-8 href=#__codelineno-9-8></a>    <span class=s2>&quot;RateLimit-Policy&quot;</span><span class=p>:</span> <span class=n>Header</span><span class=p>(</span><span class=s2>&quot;100;w=60&quot;</span><span class=p>),</span>  <span class=c1># (1)!</span>
</span><span id=__span-9-9><a id=__codelineno-9-9 name=__codelineno-9-9 href=#__codelineno-9-9></a><span class=p>})</span>
</span><span id=__span-9-10><a id=__codelineno-9-10 name=__codelineno-9-10 href=#__codelineno-9-10></a>
</span><span id=__span-9-11><a id=__codelineno-9-11 name=__codelineno-9-11 href=#__codelineno-9-11></a><span class=n>throttle</span> <span class=o>=</span> <span class=n>HTTPThrottle</span><span class=p>(</span><span class=s2>&quot;api:items&quot;</span><span class=p>,</span> <span class=n>rate</span><span class=o>=</span><span class=s2>&quot;100/min&quot;</span><span class=p>,</span> <span class=n>headers</span><span class=o>=</span><span class=n>my_headers</span><span class=p>)</span>
</span></code></pre></div> <ol> <li>A static string is perfectly valid here - <code>Headers</code> will recognize it as always-included and optimise resolution accordingly.</li> </ol> <div class="admonition tip"> <p class=admonition-title>Performance note</p> <p><code>Headers</code> optimises resolution. If all headers in a collection are static strings with <code>when="always"</code>, Traffik pre-encodes them once and skips the resolution step entirely on every request. The more static headers you have, the cheaper header resolution gets.</p> </div> <hr> <h2 id=merging-headers>Merging <abbr title="A collection of rate limit response headers, resolved per request. Import: from traffik.headers import Headers">Headers</abbr><a class=headerlink href=#merging-headers title="Permanent link">&para;</a></h2> <p><code>Headers</code> supports the <code>|</code> operator for creating merged copies, and <code>|=</code> for in-place merging. This is useful when you want to extend a preset with extra headers:</p> <div class="language-python highlight"><pre><span></span><code><span id=__span-10-1><a id=__codelineno-10-1 name=__codelineno-10-1 href=#__codelineno-10-1></a><span class=kn>from</span><span class=w> </span><span class=nn>traffik.headers</span><span class=w> </span><span class=kn>import</span> <span class=n>Headers</span><span class=p>,</span> <span class=n>Header</span><span class=p>,</span> <span class=n>DEFAULT_HEADERS_ALWAYS</span>
</span><span id=__span-10-2><a id=__codelineno-10-2 name=__codelineno-10-2 href=#__codelineno-10-2></a>
</span><span id=__span-10-3><a id=__codelineno-10-3 name=__codelineno-10-3 href=#__codelineno-10-3></a><span class=n>extra</span> <span class=o>=</span> <span class=n>Headers</span><span class=p>({</span>
</span><span id=__span-10-4><a id=__codelineno-10-4 name=__codelineno-10-4 href=#__codelineno-10-4></a>    <span class=s2>&quot;X-Service-Name&quot;</span><span class=p>:</span> <span class=n>Header</span><span class=p>(</span><span class=s2>&quot;my-api&quot;</span><span class=p>),</span>
</span><span id=__span-10-5><a id=__codelineno-10-5 name=__codelineno-10-5 href=#__codelineno-10-5></a>    <span class=s2>&quot;X-RateLimit-Reset-Ms&quot;</span><span class=p>:</span> <span class=n>Header</span><span class=o>.</span><span class=n>RESET_MILLISECONDS</span><span class=p>(</span><span class=n>when</span><span class=o>=</span><span class=s2>&quot;always&quot;</span><span class=p>),</span>
</span><span id=__span-10-6><a id=__codelineno-10-6 name=__codelineno-10-6 href=#__codelineno-10-6></a><span class=p>})</span>
</span><span id=__span-10-7><a id=__codelineno-10-7 name=__codelineno-10-7 href=#__codelineno-10-7></a>
</span><span id=__span-10-8><a id=__codelineno-10-8 name=__codelineno-10-8 href=#__codelineno-10-8></a><span class=c1># Create a merged copy - DEFAULT_HEADERS_ALWAYS is not mutated</span>
</span><span id=__span-10-9><a id=__codelineno-10-9 name=__codelineno-10-9 href=#__codelineno-10-9></a><span class=n>combined</span> <span class=o>=</span> <span class=n>DEFAULT_HEADERS_ALWAYS</span> <span class=o>|</span> <span class=n>extra</span>
</span></code></pre></div> <p>You can also <code>.copy()</code> a <code>Headers</code> instance for a shallow duplicate:</p> <div class="language-python highlight"><pre><span></span><code><span id=__span-11-1><a id=__codelineno-11-1 name=__codelineno-11-1 href=#__codelineno-11-1></a><span class=kn>from</span><span class=w> </span><span class=nn>traffik.headers</span><span class=w> </span><span class=kn>import</span> <span class=n>DEFAULT_HEADERS_ALWAYS</span><span class=p>,</span> <span class=n>Header</span>
</span><span id=__span-11-2><a id=__codelineno-11-2 name=__codelineno-11-2 href=#__codelineno-11-2></a>
</span><span id=__span-11-3><a id=__codelineno-11-3 name=__codelineno-11-3 href=#__codelineno-11-3></a><span class=n>my_copy</span> <span class=o>=</span> <span class=n>DEFAULT_HEADERS_ALWAYS</span><span class=o>.</span><span class=n>copy</span><span class=p>()</span>
</span><span id=__span-11-4><a id=__codelineno-11-4 name=__codelineno-11-4 href=#__codelineno-11-4></a><span class=n>my_copy</span><span class=p>[</span><span class=s2>&quot;X-Service-Name&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=n>Header</span><span class=p>(</span><span class=s2>&quot;my-api&quot;</span><span class=p>)</span>
</span></code></pre></div> <hr> <h2 id=disabling-a-header-per-request>Disabling a <abbr title="A single rate limit response header with a name, value resolver, and inclusion condition. Import: from traffik.headers import Header">Header</abbr> Per-Request<a class=headerlink href=#disabling-a-header-per-request title="Permanent link">&para;</a></h2> <p>Sometimes you want to suppress a specific header for a particular call, for example you have a global <code>DEFAULT_HEADERS_ALWAYS</code> on a throttle but want to hide <code>X-RateLimit-Remaining</code> on one specific endpoint.</p> <p>Use <code>Header.DISABLE</code> as a sentinel value in an override mapping passed to <code>throttle.get_headers()</code>:</p> <div class="language-python highlight"><pre><span></span><code><span id=__span-12-1><a id=__codelineno-12-1 name=__codelineno-12-1 href=#__codelineno-12-1></a><span class=kn>from</span><span class=w> </span><span class=nn>traffik.headers</span><span class=w> </span><span class=kn>import</span> <span class=n>Header</span>
</span><span id=__span-12-2><a id=__codelineno-12-2 name=__codelineno-12-2 href=#__codelineno-12-2></a>
</span><span id=__span-12-3><a id=__codelineno-12-3 name=__codelineno-12-3 href=#__codelineno-12-3></a><span class=c1># Resolve headers, but skip X-RateLimit-Remaining for this call</span>
</span><span id=__span-12-4><a id=__codelineno-12-4 name=__codelineno-12-4 href=#__codelineno-12-4></a><span class=n>resolved</span> <span class=o>=</span> <span class=k>await</span> <span class=n>throttle</span><span class=o>.</span><span class=n>get_headers</span><span class=p>(</span>
</span><span id=__span-12-5><a id=__codelineno-12-5 name=__codelineno-12-5 href=#__codelineno-12-5></a>    <span class=n>connection</span><span class=p>,</span>
</span><span id=__span-12-6><a id=__codelineno-12-6 name=__codelineno-12-6 href=#__codelineno-12-6></a>    <span class=n>headers</span><span class=o>=</span><span class=p>{</span><span class=s2>&quot;X-RateLimit-Remaining&quot;</span><span class=p>:</span> <span class=n>Header</span><span class=o>.</span><span class=n>DISABLE</span><span class=p>},</span>
</span><span id=__span-12-7><a id=__codelineno-12-7 name=__codelineno-12-7 href=#__codelineno-12-7></a><span class=p>)</span>
</span></code></pre></div> <p><code>Header.DISABLE</code> is a string sentinel (<code>":___disabled___:"</code>). The resolver checks identity (<code>is</code>), not equality, so a plain string with the same content would not trigger the disable logic.</p> <div class="admonition warning"> <p class=admonition-title>Identity matters</p> <p>Always use <code>Header.DISABLE</code> directly. A variable holding the same string value won't work because Python string interning doesn't guarantee identity for all strings.</p> </div> <hr> <h2 id=real-world-example-githubstripe-style-headers>Real-World Example: GitHub/Stripe-Style <abbr title="A collection of rate limit response headers, resolved per request. Import: from traffik.headers import Headers">Headers</abbr><a class=headerlink href=#real-world-example-githubstripe-style-headers title="Permanent link">&para;</a></h2> <p>Here's a complete setup that matches the header pattern used by most large REST APIs, with headers resolved on every hit plus a millisecond-precision reset time for clients that need it:</p> <div class="language-python highlight"><pre><span></span><code><span id=__span-13-1><a id=__codelineno-13-1 name=__codelineno-13-1 href=#__codelineno-13-1></a><span class=kn>from</span><span class=w> </span><span class=nn>fastapi</span><span class=w> </span><span class=kn>import</span> <span class=n>FastAPI</span><span class=p>,</span> <span class=n>Depends</span><span class=p>,</span> <span class=n>Request</span><span class=p>,</span> <span class=n>Response</span>
</span><span id=__span-13-2><a id=__codelineno-13-2 name=__codelineno-13-2 href=#__codelineno-13-2></a><span class=kn>from</span><span class=w> </span><span class=nn>traffik</span><span class=w> </span><span class=kn>import</span> <span class=n>HTTPThrottle</span>
</span><span id=__span-13-3><a id=__codelineno-13-3 name=__codelineno-13-3 href=#__codelineno-13-3></a><span class=kn>from</span><span class=w> </span><span class=nn>traffik.backends.inmemory</span><span class=w> </span><span class=kn>import</span> <span class=n>InMemoryBackend</span>
</span><span id=__span-13-4><a id=__codelineno-13-4 name=__codelineno-13-4 href=#__codelineno-13-4></a><span class=kn>from</span><span class=w> </span><span class=nn>traffik.headers</span><span class=w> </span><span class=kn>import</span> <span class=n>Headers</span><span class=p>,</span> <span class=n>Header</span>
</span><span id=__span-13-5><a id=__codelineno-13-5 name=__codelineno-13-5 href=#__codelineno-13-5></a>
</span><span id=__span-13-6><a id=__codelineno-13-6 name=__codelineno-13-6 href=#__codelineno-13-6></a><span class=c1># --- Build a custom header collection ---</span>
</span><span id=__span-13-7><a id=__codelineno-13-7 name=__codelineno-13-7 href=#__codelineno-13-7></a><span class=n>api_headers</span> <span class=o>=</span> <span class=n>Headers</span><span class=p>({</span>
</span><span id=__span-13-8><a id=__codelineno-13-8 name=__codelineno-13-8 href=#__codelineno-13-8></a>    <span class=c1># Core rate limit headers - always present</span>
</span><span id=__span-13-9><a id=__codelineno-13-9 name=__codelineno-13-9 href=#__codelineno-13-9></a>    <span class=s2>&quot;X-RateLimit-Limit&quot;</span><span class=p>:</span> <span class=n>Header</span><span class=o>.</span><span class=n>LIMIT</span><span class=p>(</span><span class=n>when</span><span class=o>=</span><span class=s2>&quot;always&quot;</span><span class=p>),</span>
</span><span id=__span-13-10><a id=__codelineno-13-10 name=__codelineno-13-10 href=#__codelineno-13-10></a>    <span class=s2>&quot;X-RateLimit-Remaining&quot;</span><span class=p>:</span> <span class=n>Header</span><span class=o>.</span><span class=n>REMAINING</span><span class=p>(</span><span class=n>when</span><span class=o>=</span><span class=s2>&quot;always&quot;</span><span class=p>),</span>
</span><span id=__span-13-11><a id=__codelineno-13-11 name=__codelineno-13-11 href=#__codelineno-13-11></a>
</span><span id=__span-13-12><a id=__codelineno-13-12 name=__codelineno-13-12 href=#__codelineno-13-12></a>    <span class=c1># Retry-After only on 429 (RFC 6585 compliance)</span>
</span><span id=__span-13-13><a id=__codelineno-13-13 name=__codelineno-13-13 href=#__codelineno-13-13></a>    <span class=s2>&quot;Retry-After&quot;</span><span class=p>:</span> <span class=n>Header</span><span class=o>.</span><span class=n>RESET_SECONDS</span><span class=p>(</span><span class=n>when</span><span class=o>=</span><span class=s2>&quot;throttled&quot;</span><span class=p>),</span>
</span><span id=__span-13-14><a id=__codelineno-13-14 name=__codelineno-13-14 href=#__codelineno-13-14></a>
</span><span id=__span-13-15><a id=__codelineno-13-15 name=__codelineno-13-15 href=#__codelineno-13-15></a>    <span class=c1># Millisecond-precision reset for clients that want precision  (1)!</span>
</span><span id=__span-13-16><a id=__codelineno-13-16 name=__codelineno-13-16 href=#__codelineno-13-16></a>    <span class=s2>&quot;X-RateLimit-Reset-Ms&quot;</span><span class=p>:</span> <span class=n>Header</span><span class=o>.</span><span class=n>RESET_MILLISECONDS</span><span class=p>(</span><span class=n>when</span><span class=o>=</span><span class=s2>&quot;always&quot;</span><span class=p>),</span>
</span><span id=__span-13-17><a id=__codelineno-13-17 name=__codelineno-13-17 href=#__codelineno-13-17></a>
</span><span id=__span-13-18><a id=__codelineno-13-18 name=__codelineno-13-18 href=#__codelineno-13-18></a>    <span class=c1># A static policy descriptor (RFC 9440)</span>
</span><span id=__span-13-19><a id=__codelineno-13-19 name=__codelineno-13-19 href=#__codelineno-13-19></a>    <span class=s2>&quot;RateLimit-Policy&quot;</span><span class=p>:</span> <span class=n>Header</span><span class=p>(</span><span class=s2>&quot;1000;w=60&quot;</span><span class=p>),</span>
</span><span id=__span-13-20><a id=__codelineno-13-20 name=__codelineno-13-20 href=#__codelineno-13-20></a><span class=p>})</span>
</span><span id=__span-13-21><a id=__codelineno-13-21 name=__codelineno-13-21 href=#__codelineno-13-21></a>
</span><span id=__span-13-22><a id=__codelineno-13-22 name=__codelineno-13-22 href=#__codelineno-13-22></a><span class=c1># --- Wire everything up ---</span>
</span><span id=__span-13-23><a id=__codelineno-13-23 name=__codelineno-13-23 href=#__codelineno-13-23></a><span class=n>backend</span> <span class=o>=</span> <span class=n>InMemoryBackend</span><span class=p>(</span><span class=n>namespace</span><span class=o>=</span><span class=s2>&quot;myapi&quot;</span><span class=p>)</span>
</span><span id=__span-13-24><a id=__codelineno-13-24 name=__codelineno-13-24 href=#__codelineno-13-24></a><span class=n>app</span> <span class=o>=</span> <span class=n>FastAPI</span><span class=p>(</span><span class=n>lifespan</span><span class=o>=</span><span class=n>backend</span><span class=o>.</span><span class=n>lifespan</span><span class=p>)</span>
</span><span id=__span-13-25><a id=__codelineno-13-25 name=__codelineno-13-25 href=#__codelineno-13-25></a>
</span><span id=__span-13-26><a id=__codelineno-13-26 name=__codelineno-13-26 href=#__codelineno-13-26></a><span class=n>api_throttle</span> <span class=o>=</span> <span class=n>HTTPThrottle</span><span class=p>(</span>
</span><span id=__span-13-27><a id=__codelineno-13-27 name=__codelineno-13-27 href=#__codelineno-13-27></a>    <span class=s2>&quot;api:v1&quot;</span><span class=p>,</span>
</span><span id=__span-13-28><a id=__codelineno-13-28 name=__codelineno-13-28 href=#__codelineno-13-28></a>    <span class=n>rate</span><span class=o>=</span><span class=s2>&quot;1000/min&quot;</span><span class=p>,</span>
</span><span id=__span-13-29><a id=__codelineno-13-29 name=__codelineno-13-29 href=#__codelineno-13-29></a>    <span class=n>headers</span><span class=o>=</span><span class=n>api_headers</span><span class=p>,</span>
</span><span id=__span-13-30><a id=__codelineno-13-30 name=__codelineno-13-30 href=#__codelineno-13-30></a><span class=p>)</span>
</span><span id=__span-13-31><a id=__codelineno-13-31 name=__codelineno-13-31 href=#__codelineno-13-31></a>
</span><span id=__span-13-32><a id=__codelineno-13-32 name=__codelineno-13-32 href=#__codelineno-13-32></a><span class=nd>@app</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;/items&quot;</span><span class=p>)</span>
</span><span id=__span-13-33><a id=__codelineno-13-33 name=__codelineno-13-33 href=#__codelineno-13-33></a><span class=k>async</span> <span class=k>def</span><span class=w> </span><span class=nf>list_items</span><span class=p>(</span>
</span><span id=__span-13-34><a id=__codelineno-13-34 name=__codelineno-13-34 href=#__codelineno-13-34></a>    <span class=n>request</span><span class=p>:</span> <span class=n>Request</span><span class=p>,</span>
</span><span id=__span-13-35><a id=__codelineno-13-35 name=__codelineno-13-35 href=#__codelineno-13-35></a>    <span class=n>response</span><span class=p>:</span> <span class=n>Response</span><span class=p>,</span>  <span class=c1># (2)!</span>
</span><span id=__span-13-36><a id=__codelineno-13-36 name=__codelineno-13-36 href=#__codelineno-13-36></a>    <span class=n>_</span><span class=o>=</span><span class=n>Depends</span><span class=p>(</span><span class=n>api_throttle</span><span class=p>),</span>
</span><span id=__span-13-37><a id=__codelineno-13-37 name=__codelineno-13-37 href=#__codelineno-13-37></a><span class=p>):</span>
</span><span id=__span-13-38><a id=__codelineno-13-38 name=__codelineno-13-38 href=#__codelineno-13-38></a>    <span class=c1># Resolve headers for the current request and attach them to the response.</span>
</span><span id=__span-13-39><a id=__codelineno-13-39 name=__codelineno-13-39 href=#__codelineno-13-39></a>    <span class=c1># get_headers() fetches live stats from the backend automatically.</span>
</span><span id=__span-13-40><a id=__codelineno-13-40 name=__codelineno-13-40 href=#__codelineno-13-40></a>    <span class=n>headers</span> <span class=o>=</span> <span class=k>await</span> <span class=n>api_throttle</span><span class=o>.</span><span class=n>get_headers</span><span class=p>(</span><span class=n>request</span><span class=p>)</span>  <span class=c1># (3)!</span>
</span><span id=__span-13-41><a id=__codelineno-13-41 name=__codelineno-13-41 href=#__codelineno-13-41></a>    <span class=n>response</span><span class=o>.</span><span class=n>headers</span><span class=o>.</span><span class=n>update</span><span class=p>(</span><span class=n>headers</span><span class=p>)</span>
</span><span id=__span-13-42><a id=__codelineno-13-42 name=__codelineno-13-42 href=#__codelineno-13-42></a>    <span class=k>return</span> <span class=p>{</span><span class=s2>&quot;items&quot;</span><span class=p>:</span> <span class=p>[</span><span class=s2>&quot;widget&quot;</span><span class=p>,</span> <span class=s2>&quot;gizmo&quot;</span><span class=p>]}</span>
</span></code></pre></div> <ol> <li>Some clients (JavaScript frontends, mobile apps) find millisecond precision more useful for scheduling retries than whole seconds.</li> <li>FastAPI injects a mutable <code>Response</code> object. <abbr title="A collection of rate limit response headers, resolved per request. Import: from traffik.headers import Headers">Headers</abbr> set on it are merged into the final response automatically.</li> <li><code>get_headers()</code> calls <code>throttle.stat()</code> internally to fetch the current rate limit statistics from the backend, then resolves each header's value. You don't need to pass <code>stat</code> manually.</li> </ol> <div class="admonition tip"> <p class=admonition-title>Using <code>JSONResponse</code> directly</p> <p>If you prefer to build the response yourself, pass <code>headers=</code> to <code>JSONResponse</code>: <div class="language-python highlight"><pre><span></span><code><span id=__span-14-1><a id=__codelineno-14-1 name=__codelineno-14-1 href=#__codelineno-14-1></a><span class=kn>from</span><span class=w> </span><span class=nn>fastapi.responses</span><span class=w> </span><span class=kn>import</span> <span class=n>JSONResponse</span>
</span><span id=__span-14-2><a id=__codelineno-14-2 name=__codelineno-14-2 href=#__codelineno-14-2></a><span class=nd>@app</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;/items&quot;</span><span class=p>)</span>
</span><span id=__span-14-3><a id=__codelineno-14-3 name=__codelineno-14-3 href=#__codelineno-14-3></a><span class=k>async</span> <span class=k>def</span><span class=w> </span><span class=nf>list_items</span><span class=p>(</span><span class=n>request</span><span class=p>:</span> <span class=n>Request</span><span class=p>,</span> <span class=n>_</span><span class=o>=</span><span class=n>Depends</span><span class=p>(</span><span class=n>api_throttle</span><span class=p>)):</span>
</span><span id=__span-14-4><a id=__codelineno-14-4 name=__codelineno-14-4 href=#__codelineno-14-4></a>    <span class=n>headers</span> <span class=o>=</span> <span class=k>await</span> <span class=n>api_throttle</span><span class=o>.</span><span class=n>get_headers</span><span class=p>(</span><span class=n>request</span><span class=p>)</span>
</span><span id=__span-14-5><a id=__codelineno-14-5 name=__codelineno-14-5 href=#__codelineno-14-5></a>    <span class=k>return</span> <span class=n>JSONResponse</span><span class=p>({</span><span class=s2>&quot;items&quot;</span><span class=p>:</span> <span class=p>[</span><span class=s2>&quot;widget&quot;</span><span class=p>,</span> <span class=s2>&quot;gizmo&quot;</span><span class=p>]},</span> <span class=n>headers</span><span class=o>=</span><span class=n>headers</span><span class=p>)</span>
</span></code></pre></div></p> </div> <div class="admonition note"> <p class=admonition-title><abbr title="A collection of rate limit response headers, resolved per request. Import: from traffik.headers import Headers">Headers</abbr> on throttled responses</p> <p>When a client is throttled (HTTP 429), the throttle raises an exception before your handler runs. To attach headers to 429 responses, add them in a custom exception handler. See <a href=../throttled-handlers/ >Custom Throttled Handlers</a> for the pattern.</p> </div> <p>A typical successful response from this setup would look like:</p> <div class="language-http highlight"><pre><span></span><code><span id=__span-15-1><a id=__codelineno-15-1 name=__codelineno-15-1 href=#__codelineno-15-1></a><span class=kr>HTTP</span><span class=o>/</span><span class=m>1.1</span> <span class=m>200</span> <span class=ne>OK</span>
</span><span id=__span-15-2><a id=__codelineno-15-2 name=__codelineno-15-2 href=#__codelineno-15-2></a><span class=na>X-RateLimit-Limit</span><span class=o>:</span> <span class=l>1000</span>
</span><span id=__span-15-3><a id=__codelineno-15-3 name=__codelineno-15-3 href=#__codelineno-15-3></a><span class=na>X-RateLimit-Remaining</span><span class=o>:</span> <span class=l>997</span>
</span><span id=__span-15-4><a id=__codelineno-15-4 name=__codelineno-15-4 href=#__codelineno-15-4></a><span class=na>X-RateLimit-Reset-Ms</span><span class=o>:</span> <span class=l>43200</span>
</span><span id=__span-15-5><a id=__codelineno-15-5 name=__codelineno-15-5 href=#__codelineno-15-5></a><span class=na>RateLimit-Policy</span><span class=o>:</span> <span class=l>1000;w=60</span>
</span><span id=__span-15-6><a id=__codelineno-15-6 name=__codelineno-15-6 href=#__codelineno-15-6></a><span class=na>Content-Type</span><span class=o>:</span> <span class=l>application/json</span>
</span><span id=__span-15-7><a id=__codelineno-15-7 name=__codelineno-15-7 href=#__codelineno-15-7></a>
</span><span id=__span-15-8><a id=__codelineno-15-8 name=__codelineno-15-8 href=#__codelineno-15-8></a><span class=p>{</span><span class=nt>&quot;items&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=s2>&quot;widget&quot;</span><span class=p>,</span><span class=w> </span><span class=s2>&quot;gizmo&quot;</span><span class=p>]}</span>
</span></code></pre></div> <p>And a throttled response:</p> <div class="language-http highlight"><pre><span></span><code><span id=__span-16-1><a id=__codelineno-16-1 name=__codelineno-16-1 href=#__codelineno-16-1></a><span class=kr>HTTP</span><span class=o>/</span><span class=m>1.1</span> <span class=m>429</span> <span class=ne>Too Many Requests</span>
</span><span id=__span-16-2><a id=__codelineno-16-2 name=__codelineno-16-2 href=#__codelineno-16-2></a><span class=na>X-RateLimit-Limit</span><span class=o>:</span> <span class=l>1000</span>
</span><span id=__span-16-3><a id=__codelineno-16-3 name=__codelineno-16-3 href=#__codelineno-16-3></a><span class=na>X-RateLimit-Remaining</span><span class=o>:</span> <span class=l>0</span>
</span><span id=__span-16-4><a id=__codelineno-16-4 name=__codelineno-16-4 href=#__codelineno-16-4></a><span class=na>X-RateLimit-Reset-Ms</span><span class=o>:</span> <span class=l>8400</span>
</span><span id=__span-16-5><a id=__codelineno-16-5 name=__codelineno-16-5 href=#__codelineno-16-5></a><span class=na>RateLimit-Policy</span><span class=o>:</span> <span class=l>1000;w=60</span>
</span><span id=__span-16-6><a id=__codelineno-16-6 name=__codelineno-16-6 href=#__codelineno-16-6></a><span class=na>Retry-After</span><span class=o>:</span> <span class=l>9</span>
</span><span id=__span-16-7><a id=__codelineno-16-7 name=__codelineno-16-7 href=#__codelineno-16-7></a><span class=na>Content-Type</span><span class=o>:</span> <span class=l>application/json</span>
</span><span id=__span-16-8><a id=__codelineno-16-8 name=__codelineno-16-8 href=#__codelineno-16-8></a>
</span><span id=__span-16-9><a id=__codelineno-16-9 name=__codelineno-16-9 href=#__codelineno-16-9></a><span class=p>{</span><span class=nt>&quot;detail&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Too many requests. Retry in 9 seconds.&quot;</span><span class=p>}</span>
</span></code></pre></div> <div class="admonition tip"> <p class=admonition-title>RFC 9440 - The emerging standard</p> <p>The IETF's <a href=https://www.rfc-editor.org/rfc/rfc9440>RFC 9440</a> standardises rate limit headers. If your API needs to be strictly spec-compliant, the <code>RateLimit</code> (combined) and <code>RateLimit-Policy</code> headers are the future direction. The <code>X-RateLimit-*</code> prefix is widely understood but not standardised, it's the safe pragmatic choice for compatibility today.</p> </div> <hr> <h2 id=summary>Summary<a class=headerlink href=#summary title="Permanent link">&para;</a></h2> <table> <thead> <tr> <th>Concept</th> <th>What it does</th> </tr> </thead> <tbody> <tr> <td><code>DEFAULT_HEADERS_ALWAYS</code> (from <code>traffik.headers</code>)</td> <td>Preset: <code>Limit</code> + <code>Remaining</code> + <code>Retry-After</code> resolved on every hit</td> </tr> <tr> <td><code>DEFAULT_HEADERS_THROTTLED</code> (from <code>traffik.headers</code>)</td> <td>Preset: same three headers, but only resolved on throttled (<code>429</code>) hits</td> </tr> <tr> <td><code>Header.LIMIT(when=...)</code></td> <td>Resolves to the window's max hit count</td> </tr> <tr> <td><code>Header.REMAINING(when=...)</code></td> <td>Resolves to hits left this window</td> </tr> <tr> <td><code>Header.RESET_SECONDS(when=...)</code></td> <td>Resolves to seconds until window resets</td> </tr> <tr> <td><code>Header.RESET_MILLISECONDS(when=...)</code></td> <td>Resolves to milliseconds until window resets</td> </tr> <tr> <td><code>Header("static")</code></td> <td>A fixed string, always included</td> </tr> <tr> <td><code>Header(fn, when=...)</code></td> <td>A dynamic value via resolver callable</td> </tr> <tr> <td><code>Headers({...})</code></td> <td>A collection of headers attached to a throttle</td> </tr> <tr> <td><code>headers_a \| headers_b</code></td> <td>Merge two header collections (non-mutating)</td> </tr> <tr> <td><code>Header.DISABLE</code></td> <td>Sentinel to suppress a specific header in a call</td> </tr> </tbody> </table> <form class=md-feedback name=feedback hidden> <fieldset> <legend class=md-feedback__title> Was this page helpful? </legend> <div class=md-feedback__inner> <div class=md-feedback__list> <button class="md-feedback__icon md-icon" type=submit title="This page was helpful" data-md-value=1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 12a8 8 0 0 0-8-8 8 8 0 0 0-8 8 8 8 0 0 0 8 8 8 8 0 0 0 8-8m2 0a10 10 0 0 1-10 10A10 10 0 0 1 2 12 10 10 0 0 1 12 2a10 10 0 0 1 10 10M10 9.5c0 .8-.7 1.5-1.5 1.5S7 10.3 7 9.5 7.7 8 8.5 8s1.5.7 1.5 1.5m7 0c0 .8-.7 1.5-1.5 1.5S14 10.3 14 9.5 14.7 8 15.5 8s1.5.7 1.5 1.5m-5 7.73c-1.75 0-3.29-.73-4.19-1.81L9.23 14c.45.72 1.52 1.23 2.77 1.23s2.32-.51 2.77-1.23l1.42 1.42c-.9 1.08-2.44 1.81-4.19 1.81"/></svg> </button> <button class="md-feedback__icon md-icon" type=submit title="This page could be improved" data-md-value=0> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 12a8 8 0 0 0-8-8 8 8 0 0 0-8 8 8 8 0 0 0 8 8 8 8 0 0 0 8-8m2 0a10 10 0 0 1-10 10A10 10 0 0 1 2 12 10 10 0 0 1 12 2a10 10 0 0 1 10 10m-6.5-4c.8 0 1.5.7 1.5 1.5s-.7 1.5-1.5 1.5-1.5-.7-1.5-1.5.7-1.5 1.5-1.5M10 9.5c0 .8-.7 1.5-1.5 1.5S7 10.3 7 9.5 7.7 8 8.5 8s1.5.7 1.5 1.5m2 4.5c1.75 0 3.29.72 4.19 1.81l-1.42 1.42C14.32 16.5 13.25 16 12 16s-2.32.5-2.77 1.23l-1.42-1.42C8.71 14.72 10.25 14 12 14"/></svg> </button> </div> <div class=md-feedback__note> <div data-md-value=1 hidden> Thanks for your feedback! </div> <div data-md-value=0 hidden> Thanks for your feedback! Help us improve by <a href=https://github.com/ti-oluwa/traffik/issues/new target=_blank rel=noopener>opening an issue</a>. </div> </div> </div> </fieldset> </form> </article> </div> <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> <button type=button class="md-top md-icon" data-md-component=top hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg> Back to top </button> </main> <footer class=md-footer> <nav class="md-footer__inner md-grid" aria-label=Footer> <a href=../ class="md-footer__link md-footer__link--prev" aria-label="Previous: Overview"> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </div> <div class=md-footer__title> <span class=md-footer__direction> Previous </span> <div class=md-ellipsis> Overview </div> </div> </a> <a href=../rules/ class="md-footer__link md-footer__link--next" aria-label="Next: Throttle Rules & Wildcards"> <div class=md-footer__title> <span class=md-footer__direction> Next </span> <div class=md-ellipsis> Throttle Rules & Wildcards </div> </div> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-copyright__highlight> Copyright &copy; 2026 tioluwa </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> <div class=md-social> <a href=https://github.com/ti-oluwa/traffik target=_blank rel=noopener title=github.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </a> <a href=https://pypi.org/project/traffik/ target=_blank rel=noopener title=pypi.org class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.8 200.5c-7.7-30.9-22.3-54.2-53.4-54.2h-40.1v47.4c0 36.8-31.2 67.8-66.8 67.8H172.7c-29.2 0-53.4 25-53.4 54.3v101.8c0 29 25.2 46 53.4 54.3 33.8 9.9 66.3 11.7 106.8 0 26.9-7.8 53.4-23.5 53.4-54.3v-40.7H226.2v-13.6h160.2c31.1 0 42.6-21.7 53.4-54.2 11.2-33.5 10.7-65.7 0-108.6M286.2 444.7a20.4 20.4 0 1 1 0-40.7 20.4 20.4 0 1 1 0 40.7M167.8 248.1h106.8c29.7 0 53.4-24.5 53.4-54.3V91.9c0-29-24.4-50.7-53.4-55.6-35.8-5.9-74.7-5.6-106.8.1-45.2 8-53.4 24.7-53.4 55.6v40.7h106.9v13.6h-147c-31.1 0-58.3 18.7-66.8 54.2-9.8 40.7-10.2 66.1 0 108.6 7.6 31.6 25.7 54.2 56.8 54.2H101v-48.8c0-35.3 30.5-66.4 66.8-66.4m-6.6-183.4a20.4 20.4 0 1 1 0 40.8 20.4 20.4 0 1 1 0-40.8"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"annotate": null, "base": "../..", "features": ["navigation.tabs", "navigation.tabs.sticky", "navigation.sections", "navigation.expand", "navigation.path", "navigation.top", "navigation.footer", "search.suggest", "search.highlight", "search.share", "content.code.copy", "content.code.annotate", "content.tabs.link", "content.tooltips", "toc.follow"], "search": "../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script> <script src=../../assets/javascripts/bundle.79ae519e.min.js></script> </body> </html>